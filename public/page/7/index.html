<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CryptPad Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="CryptPad Blog">
<meta property="og:url" content="https://blog.cryptpad.org/page/7/index.html">
<meta property="og:site_name" content="CryptPad Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CryptPad Blog">
  
    <link rel="alternate" href="/atom.xml" title="CryptPad Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div class="banner" id="banner"></div>
  <div class="banner" id="banner-overlay"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/css/images/CryptPad_logo.svg" class="cp-logo" alt="CryptPad Logo">
      <h1 id="logo-wrap">
        <a href="/" id="logo">CryptPad Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="https://cryptpad.fr">Use CryptPad.fr</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.cryptpad.org"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-CryptPad-funding-status-after-one-month" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/04/CryptPad-funding-status-after-one-month/" class="article-date">
  <time datetime="2018-08-04T05:56:23.000Z" itemprop="datePublished">2018-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/04/CryptPad-funding-status-after-one-month/">CryptPad funding status after one month</a>
    </h1>
  


        
            <span class="article-author">
                by
                Ludovic Dubost
            </span>
        

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/cryptpad-funding-blog-cover.png" alt="one month funding status"></p>
<p>It’s been a month now that we have started the OpenCollective for CryptPad and started our campaign for funding CryptPad and insuring it’s future in 2019, so I wanted to give a status on this funding initiative.</p>
<p>First we are highly grateful to all that have responded positively and also that have relayed our campaign. We do feel stronger with the help of our community and it motivates us more.</p>
<p>In particular we have received a commitment from the <a href="https://c3w.at/" target="_blank" rel="noopener">C3Wien Community</a> in Austria, to contribute 360 Euros / year as well as some of their members to whom our communication was relayed. We have also received a few donations for more than 50 Euros coming from the USA and Austria (thanks <a href="https://twitter.com/mikegoelzer" target="_blank" rel="noopener">Michael Goelzer</a>, KimoNine, shibayashi) and also monthly donations (thanks <a href="https://twitter.com/dangagliar" target="_blank" rel="noopener">Daniele Gagliardi</a> and an anonymous backer !) and one time donations reaching now more than <a href="https://opencollective.com/cryptpad/#contributors" target="_blank" rel="noopener">10 donators through OpenCollective</a>.</p>
<p>We also had new subscribers to the CryptPad subscriptions and in total now we can count on 30 participants to CryptPad funding for a total now of 750 Euros for the month of July and 2000 Euros since subscriptions started last year. This funding originates from 11 different countries around the world and actually not yet from France our home country who has funded the beginning of CryptPad with the OpenPAAS project. </p>
<p><img src="/images/cryptpad-countries.jpg" alt="funding by country"></p>
<p>This amount is of course still low and not enough to guarantee funding next year for CryptPad, but it’s a start without much communication about the funding of CryptPad and about the long term objectives of this project.</p>
<p>Now we need more help ! First we need to be able to sustain our team, but also we need to be able to expand, especially if we want to have Open Source software in the Zero-Knowledge space. Proprietary closed source software providing some way of Zero-Knowledge will probably start growing with extensive funding. If we want independent free-software alternatives for this type of software, then we need to group our effort and fund open source solutions like CryptPad.</p>
<p>Since the launch of the campaign we have also published a <a href="/tags/roadmap/">roadmap for CryptPad</a> of what we would like to achieve with the funding. It’s also available on the <a href="https://opencollective.com/cryptpad/#about" target="_blank" rel="noopener">OpenCollective web site</a>. Come check it out and see our ambitious objectives for this project. Aaron and Yann, our CryptPad developers, are already hard at work and the shared folders feature, one of the most demanded features, is already advancing very fast.</p>
<p>We want also to take the opportunity to thank Caleb James De Lisle, the creator of CryptPad, who has left XWiki SAS at the end of July to pursue his own projects (CJDNS and others). Caleb has done incredible work first creating CryptPad and also on XWiki SAS managing our research projects for the last few years. CryptPad’s development is in good hands with Aaron and Yann who have been the main commiters of the project in the last year. In the last few month he has helped setup the Open Collective and the roadmap to help fund CryptPad in the future. I will now relay him on this aspect and we are a looking for a new team member to <a href="https://www.xwiki.com/en/jobs/research-and-development-lead" target="_blank" rel="noopener">join our research funding initiative and lead CryptPad on the non-technical aspects</a>. I’m sure Caleb won’t fully leave us and at least be a regular adviser to the project.</p>
<p><a href="https://cryptpad.fr" target="_blank" rel="noopener">Try CryptPad</a>, love it, <a href="https://opencollective.com/cryptpad/" target="_blank" rel="noopener">take care of it</a>, and even better <a href="https://github.com/xwiki-labs/cryptpad" target="_blank" rel="noopener">come help</a> !</p>
<p>Ludovic Dubost &amp; the CryptPad Team</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.cryptpad.org/2018/08/04/CryptPad-funding-status-after-one-month/" data-id="cktsjy9u7000ecya8rns1bqib" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/donate/">donate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/funding/">funding</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/open-collective/">open collective</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Making-CryptPad-CSS-3-times-faster-by-loading-it-twice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/20/Making-CryptPad-CSS-3-times-faster-by-loading-it-twice/" class="article-date">
  <time datetime="2018-07-20T06:30:59.000Z" itemprop="datePublished">2018-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/20/Making-CryptPad-CSS-3-times-faster-by-loading-it-twice/">Making CryptPad CSS 3 times faster, by loading it twice</a>
    </h1>
  


        
            <span class="article-author">
                by
                Caleb James DeLisle
            </span>
        

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <script src="https://cryptpad.fr/common/media-tag-nacl.min.js"></script>

<p>In CryptPad development, we have always tried to push the limits of the technology. As you might know, we don’t minify any of our javascript code and we have no build system, yet CryptPad is still faster than many similar projects which do. In recent profiling, we determined that the biggest cause of slow loading was compilng of less stylesheets.</p>
<p>All of the styles for CryptPad are written in <a href="http://lesscss.org/" target="_blank" rel="noopener">Less</a> CSS templating language and because we don’t have a build system, when you load a page on CryptPad, it downloads the less compiler and runs it in your browser. When the less has been compiled the first time, it is cached in the browser’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener">localStorage</a> so that it doesn’t need to be compiled again (until next release). Unfortunately, the way we structured CryptPad Less code led to this taking a long time.</p>
<p>CSS by its nature is very much like object inheritence, a design pattern popular in the 1990s which has <a href="https://link.springer.com/chapter/10.1007/1-85233-856-3_23" target="_blank" rel="noopener">since</a> <a href="https://codeburst.io/inheritance-is-evil-stop-using-it-6c4f1caf5117" target="_blank" rel="noopener">been</a> <a href="http://neethack.com/2017/04/Why-inheritance-is-bad/" target="_blank" rel="noopener">discredited</a>. In a bid to keep our styles under control, we decided to make heavy use of Less <a href="http://lesscss.org/features/#mixins-feature" target="_blank" rel="noopener">mixins</a>. The idea was that we didn’t want our CSS code to “speak until it was spoken to”.</p>
<p>Something like the following would be very problematic if it were dumped on the global scope, but it is never output until it is called:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.example_header() &#123;</span><br><span class="line">    a &#123;</span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>So then the code which uses it can invoke it only in the exact place where it ought to be used.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@include &quot;example.less&quot;;</span><br><span class="line">.cp-app-pad &#123;</span><br><span class="line">    .cp-padheader &#123;</span><br><span class="line">        .cp-padheader-left &#123;</span><br><span class="line">            .example_header();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you’re a CSS purist, you’re probably pulling your hair out now, because <em>the right way</em> is to use html classes. The thing is, we do, but because CryptPad is made up of many different pieces of open source software, we cannot control all of the HTML and sometimes things <a href="https://github.com/xwiki-labs/cryptpad/blob/2.4.0/customize.dist/src/less2/include/ckeditor-fix.less" target="_blank" rel="noopener">aren’t so simple</a>. Using mixins gave us an extra layer of safety and allowed us to write CSS feeling quite confident that it would not end up changing things where it wasn’t supposed to.</p>
<p><img src="/images/Strip-CSS-respect-650-finalenglish1.jpg"></p>
<center data-yeah-i-know-a-center-tag="so sue me"><em>Cascading works great, until you include one CSS file that was written by this guy.</em></center>

<h2 id="Parameterized-mixins"><a href="#Parameterized-mixins" class="headerlink" title="Parameterized mixins"></a>Parameterized mixins</h2><p>An excellent feature of Less is parameterized mixins, that is, templates with arguments. One of our biggest templates is called <code>.toolbar_main()</code> and this builds the toolbar at the top of CryptPad as well as the user-list on the lefthand side. In order to make the customizable colors with the same HTML structure, we opted to use a parameterized mixin like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.toolbar_main (</span><br><span class="line">    @color: @colortheme_default-color, // Color of the text for the toolbar</span><br><span class="line">    @bg-color: @colortheme_default-bg, // color of the toolbar background</span><br><span class="line">    @warn-color: @colortheme_default-warn, // color of the warning text in the toolbar</span><br><span class="line">    @barWidth: 600px // width of the toolbar</span><br><span class="line">) &#123;</span><br><span class="line">/// a lot of code here, using colors based on the parameters,</span><br><span class="line">/// but lightened or darkened using less functions.</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Then each app would call <code>.toolbar_main()</code> with its own color parameters, and get a nice toolbar, customized to that app’s color theme. Again, this is not the only way to do it, but having the ability to generate CSS with highly specific color rules proved to be extremely useful for overriding leaked styles coming from the software that we integrate.</p>
<h2 id="State-explosion"><a href="#State-explosion" class="headerlink" title="State explosion"></a>State explosion</h2><p>What we didn’t think about at that time was the effect that the proliferation of CryptPad Apps would have on the amount of CSS being generated. We started with just a few styles and just a few apps to apply those styles on.</p>
<p><media-tag src="https://files.cryptpad.fr/blob/ba/baf60fc13e35117c60337bbd93ee1dd43ede9280fe5aa583" data-crypto-key="cryptpad:9nEx58X4nrmTYmi5i8K8bb6DvTRemmYubZbU1J1dDa0="></media-tag></p>
<p>But as we added more and more CryptPad apps, the same CSS was being generated and applied over and over…</p>
<p><media-tag src="https://files.cryptpad.fr/blob/1b/1b5e6189a55efb7ea30ff1cc128597ce76b158fd659d6f45" data-crypto-key="cryptpad:tvxTuU3P5nqqQ75TMRsjehvOjljlkSGzpZTgrfhgGSg="></media-tag></p>
<p>Then as our styles become more complex, the CSS which was being copy/pasted by less compiler became bigger and bigger</p>
<p><media-tag src="https://files.cryptpad.fr/blob/83/8398106a4ee0109630793846cabfdecaa8ee80313cca7e37" data-crypto-key="cryptpad:qy+1nKYU8sQiQR88IgqyxAfspxZiEN8Q3NkBI2qpPOA="></media-tag></p>
<p>The total of all our less code in the entire project was only 235k, and it was compiling to over <strong>1.3 megabytes of CSS</strong>. We cache the compiled CSS by placing it in <a href="https://developer.mozilla.org/en/docs/Web/API/Window/localStorage" target="_blank" rel="noopener">localStorage</a>, but still, every time a new version of CryptPad was released, the CSS needed to be recompiled and this was dominating the loading time.</p>
<h2 id="Building-a-Linker-for-CSS"><a href="#Building-a-Linker-for-CSS" class="headerlink" title="Building a Linker for CSS"></a>Building a Linker for CSS</h2><p>If you have experience with C/C++, you might recognize this problem. It is as if there was no linker and the only way to reuse code was to use preprocessor <code>#include</code> over and over again.</p>
<p>Since by this point, we had a significant amount of Less which was designed this way, rewriting it was not an option, so we started looking for ways to <em>link</em> it rather than copy/pasting it over and over again. Fortunately most of the bigger mixins only applied rules to specific classes, so moving them up to the root level would not cause trouble, though to be safe, we wanted to only load the styles that were necessary.</p>
<p>If we would indicate to the javascript code which loaded the Less that a particular Less file was needed, it could be compiled, cached and included <em>separately</em>, and thus it could be reused across apps. In order to keep the Less API as close to the same as possible, we decided to put that indication inside of the <code>.&lt;filename&gt;_main()</code> mixin.</p>
<p>So <code>.dropdown_main()</code> went from this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.dropdown_main () &#123;</span><br><span class="line">    // all the code here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.dropdown_main () &#123;</span><br><span class="line">    --LessLoader_require: LessLoader_currentFile();</span><br><span class="line">&#125;;</span><br><span class="line">&amp; &#123;</span><br><span class="line">    // all the code here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Two important things to note: firstly <code>LessLoader_currentFile()</code> is a function which we created (as the name implies, it’s defined in <code>LessLoader.js</code>), it simply expands to the current function name. Secondly, when a less file is included with the <code>reference</code> flag (e.g. <code>@include (reference) &quot;./dropdown.less&quot;;</code>) the content is not output but the mixins are made available, so moving the code down to the bottom of <code>dropdown.less</code> would cause it not to end up in the compilation of <code>app-pad.less</code>.</p>
<p>The resulting CSS from this contains something like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--LessLoader_require: &quot;/customize/src/less/include/dropdown.less&quot;;</span><br></pre></td></tr></table></figure>
<p>LessLoader would then simply scan for <code>--LessLoader_require:</code> and trigger loading of those files, which are still parsed by Less, but are the same for every CryptPad app.</p>
<h3 id="Parameters-with-CSS-variables"><a href="#Parameters-with-CSS-variables" class="headerlink" title="Parameters with CSS variables"></a>Parameters with CSS variables</h3><p>In this example, I intentionally left out the parameterized mixins. Solving this was slightly more complicated and in order to do it, we made use of a reasonably new feature in web browsers: <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables" target="_blank" rel="noopener">CSS variables</a>. </p>
<p>Today, one can write in CSS the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">:root &#123;</span><br><span class="line">    --color-should-be: brown;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// potentially much later...</span><br><span class="line">.element &#123;</span><br><span class="line">    color: var(--color-should-be);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and the element text will be brown. Discovering this was a breakthrough because it meant that the arguments could be turned into variables in <code>app-pad.less</code> and then made use of in <code>toolbar.less</code>. However, there are limitations to what you can do with CSS variables. For example, this doesn’t work:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">:root &#123;</span><br><span class="line">    --hack-boolean: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// later on...</span><br><span class="line"></span><br><span class="line">@media screen and (max-width: calc(var(--hack-boolean) * 100000000)) &#123;</span><br><span class="line">    // HAHAHA I MADE AN IF STATEMENT</span><br><span class="line">    :root &#123; --lets-define-another-variable: &quot;lol&quot;; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center><em>If this worked, I’d probably be using it</em></center>

<p><br></p>
<h4 id="Scoped-CSS-variables"><a href="#Scoped-CSS-variables" class="headerlink" title="Scoped CSS variables"></a>Scoped CSS variables</h4><p>What does work, however, is specifying different values of the same variable at different scopes, so this does work:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.my-button &#123; --button-color: red; &#125;</span><br><span class="line">.my-popup-window .my-button &#123; --button-color: blue; &#125;</span><br><span class="line"></span><br><span class="line">// later on...</span><br><span class="line"></span><br><span class="line">.my-button &#123;</span><br><span class="line">    background-color: var(--button-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But possible uses/abuses of this feature were not investigated.</p>
<h4 id="Making-it-work"><a href="#Making-it-work" class="headerlink" title="Making it work"></a>Making it work</h4><p>Following the general principle of <a href="https://www.joelonsoftware.com/2005/05/11/making-wrong-code-look-wrong/" target="_blank" rel="noopener">keeping the variable definition close to the usage</a>, we put the variable definitions inside of the <code>.&lt;filename&gt;_main()</code> mixin and the usages below in the same file. In order to avoid namespace collisons, we prefixed all variables with the name of the file. A simplified version of avatar.less looks like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.avatar_main(@width) &#123;</span><br><span class="line">    --LessLoader_require: LessLoader_currentFile();</span><br><span class="line">    --avatar-width: @width;</span><br><span class="line">&#125;</span><br><span class="line">&amp; &#123;</span><br><span class="line">    &amp;.cp-avatar &#123;</span><br><span class="line">        ...</span><br><span class="line">        .cp-avatar-default, media-tag &#123;</span><br><span class="line">            width: var(--avatar-width);</span><br></pre></td></tr></table></figure>
<p>In some cases, we needed to introduce additional variables because of the use of Less functions such as <a href="http://lesscss.org/functions/#color-operations" target="_blank" rel="noopener">lighten() and darken()</a>, which obviously cannot work on CSS variables. So we used the following pattern in many places:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.help_main (@color, @bg-color) &#123;</span><br><span class="line">    --LessLoader_require: LessLoader_currentFile();</span><br><span class="line">    @help-bg-color-l15: lighten(@bg-color, 15%);</span><br><span class="line">    @help-text-color: contrast(@help-bg-color-l15, #fff, #000); //@color;</span><br><span class="line">    @help-link-color: contrast(@help-bg-color-l15, lighten(spin(@bg-color, 180), 10%), darken(spin(@bg-color, 180), 10%));</span><br><span class="line"></span><br><span class="line">    --help-bg-color-l15: @help-bg-color-l15;</span><br><span class="line">    --help-text-color: @help-text-color;</span><br><span class="line">    --help-link-color: @help-link-color;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h3><p>After carefully planning and studying solutions, we managed a fairly non-invasive refactoring of the styles which took Less compile time down from almost 3 seconds to around 900ms. For simplistic pages like the front page, the number dropped to around 200ms.</p>
<p>The key result is that a person who has never seen CryptPad before will see the main page right away instead of waiting 3 or more seconds to compile all the less for the entire project.</p>
<h2 id="But-wait-what-about-Internet-Explorer"><a href="#But-wait-what-about-Internet-Explorer" class="headerlink" title="But wait, what about Internet Explorer ?"></a>But wait, what about Internet Explorer ?</h2><p>This question is the bane of many web developers’ existance. In this case, the problem is that <a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/csscustompropertiesakacssvariables/" target="_blank" rel="noopener">Internet Explorer has no CSS variables</a>. Last week we changed CryptPad so that when you use it, your browser will let us know if it doesn’t support CSS variables. This is done using the <a href="https://blog.cryptpad.fr/2017/07/07/cryptpad-analytics-what-we-cant-know-what-we-must-know-what-we-want-to-know/#What-we-collect-because-we-want-to-know" target="_blank" rel="noopener">feedback mechanism</a> which is an opt-out collection of information such as how often particular features are used and whether certain things are supported by the browsers of people using CryptPad.</p>
<p>What we found is that in the past week, we saw about 50 unique users who are running browsers which don’t support CSS variables. With our approximately 4500 unique users per week, this is a little over 1%.</p>
<h3 id="Making-an-acceptable-fallback"><a href="#Making-an-acceptable-fallback" class="headerlink" title="Making an acceptable fallback"></a>Making an acceptable fallback</h3><p>The One Percent jokes asside, it’s hard to justify making CryptPad 300% slower for everyone who tries it for the first time, just to satisfy about 1% of the userbase. But at the same time, it’s sad to drop support for a browser which at the current moment does work with CryptPad.</p>
<p>The solution we devised was to specify default values and then override them.</p>
<p>For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.cp-markdown-toolbar &#123;</span><br><span class="line">    ...</span><br><span class="line">    button &#123;</span><br><span class="line">        // IE sees this (variable compiled by less)</span><br><span class="line">        color: @toolbar-color;</span><br><span class="line">        </span><br><span class="line">        // everyone else sees this</span><br><span class="line">        color: var(--toolbar-color);</span><br></pre></td></tr></table></figure>
<p>The only question remaining was how to specify the defaults in a way that was simple for us when we worked on the less files. Most of our <code>.&lt;filemane&gt;_main()</code> parameterized mixins already had default values in case they were called without parameters, so we already knew what sane defaults would be. What we decided to do was create a new mixin called <code>.&lt;filename&gt;_vars()</code>, which would assign a set of Less variables based on the arguments.</p>
<p>The final result looked like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.help_vars (</span><br><span class="line">    @color: @colortheme_default-color,</span><br><span class="line">    @bg-color: @colortheme_default-bg</span><br><span class="line">) &#123;</span><br><span class="line">    @help-bg-color-l15: lighten(@bg-color, 15%);</span><br><span class="line">    @help-text-color: contrast(@help-bg-color-l15, #fff, #000); //@color;</span><br><span class="line">    @help-link-color: contrast(@help-bg-color-l15, lighten(spin(@bg-color, 180), 10%), darken(spin(@bg-color, 180), 10%));</span><br><span class="line">&#125;</span><br><span class="line">.help_main (@color, @bg-color) &#123;</span><br><span class="line">    --LessLoader_require: LessLoader_currentFile();</span><br><span class="line">    .help_vars(@color, @bg-color);</span><br><span class="line">    --help-bg-color-l15: @help-bg-color-l15;</span><br><span class="line">    --help-text-color: @help-text-color;</span><br><span class="line">    --help-link-color: @help-link-color;</span><br><span class="line">&#125;;</span><br><span class="line">&amp; &#123;</span><br><span class="line">    .help_vars();</span><br><span class="line">    .cp-help-container &#123;</span><br><span class="line"></span><br><span class="line">        position: relative;</span><br><span class="line">        background-color: @help-bg-color-l15;</span><br><span class="line">        background-color: var(--help-bg-color-l15);</span><br></pre></td></tr></table></figure>
<p>Going through it step-by-step, the <code>.help_vars()</code> mixin takes parameters but it defines default values, then it creates some Less variables which are accessed after it is used. <code>.help_main()</code> calls <code>.help_vars()</code> and passes it arguments, then takes it’s results and assigns them to CSS variables. Then the main block of the Less file also calls <code>.help_vars()</code> but without any arguments, so the defaults are used. Then in the main block, each usage of a CSS variable also has the usage of the less variable. The less variable provides the default value, the one which IE will see, and then the CSS variable provides the specified value, the one which will be different per CryptPad application.</p>
<h2 id="There-you-have-it"><a href="#There-you-have-it" class="headerlink" title="There you have it"></a>There you have it</h2><p>Every Less file now gets loaded twice, first it is loaded by the <code>@include (reference)</code> call, where it is parsed in order to expose the <code>.&lt;filename&gt;_main()</code> mixin, then it is loaded a second time as an independent file. Importantly, however, once it is compiled it is stored into localStorage and the toolbar CSS which is compiled when you go to the Rich Text app is the exact same CSS which will be used when you go to the Code/Markdown app. This feature is available in the <code>staging</code> branch of the CryptPad project and will be on CryptPad.fr in the next release.</p>
<p>We could make it even faster, by separating the main content of the Less files from the <code>.&lt;filename&gt;_vars()</code> and <code>.&lt;filename&gt;_main()</code> mixins, essentially making header files, in C/C++ parlance. And if we find in future profiling that less compiling remains a signficant performance penalty, there’s a good chance that we will.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.cryptpad.org/2018/07/20/Making-CryptPad-CSS-3-times-faster-by-loading-it-twice/" data-id="cktsjy9up0013cya8venvpvcm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-CryptPad-Roadmap" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/13/CryptPad-Roadmap/" class="article-date">
  <time datetime="2018-07-13T07:11:04.000Z" itemprop="datePublished">2018-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/13/CryptPad-Roadmap/">CryptPad Roadmap</a>
    </h1>
  


        
            <span class="article-author">
                by
                Caleb James DeLisle
            </span>
        

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>CryptPad was started as an experimental platform as part of the <a href="http://ng.open-paas.org/" target="_blank" rel="noopener">OpenPaaS::NG research project</a>. Since then it has developed into a suite of editors for many different types of documents, all without ever leaking the content that you edit to the server or the server operators. Now, in order to keep the project moving, we need your help.</p>
<p>We have created a roadmap of the features which we would like to develop over the next year and <strong>we’re hoping to raise 60,000€</strong> to finance it. Fortunately, <strong>XWiki SAS is willing to match your donations euro-for-euro</strong>. XWiki SAS is a company with open source at its heart and it was the company where CryptPad was first envisioned. XWiki SAS normally sells days of development time at about 1,000€ each, but since this project is dear to our hearts, we are also discounting the structure costs (things like the office and business taxes) for this project. <strong>We believe in CryptPad, but in order to succeed, we need you to believe in it too</strong>.</p>
<p>The following is a 48 week roadmap which will fund one developer to work on CryptPad. You can donate to this roadmap on <a href="https://opencollective.com/cryptpad" target="_blank" rel="noopener">https://opencollective.com/cryptpad</a> or on <a href="https://accounts.cryptpad.fr/#/donate" target="_blank" rel="noopener">https://accounts.cryptpad.fr/#/donate</a>, if you would like to make a donation by wire transfer or by cryptocurrency, please get in touch with us at <a href="mailto:sales@cryptpad.fr" target="_blank" rel="noopener">sales@cryptpad.fr</a> and if you are involved in EU research projects and would like to work with us and this cutting edge Privacy Enhancing Technology, please contact <a href="mailto:research@xwiki.com" target="_blank" rel="noopener">research@xwiki.com</a>.</p>
<h1 id="Goal-1-Spreadsheets-amp-Office-Documents"><a href="#Goal-1-Spreadsheets-amp-Office-Documents" class="headerlink" title="Goal 1 - Spreadsheets &amp; Office Documents"></a>Goal 1 - Spreadsheets &amp; Office Documents</h1><p>CryptPad is excellent for quick editing of meeting notes and plans, and it is able to store and view images and PDF files, but it does not allow editing of more complex types of files such as spreadsheets and word documents. Fortunately there is an open source web-based editor called OnlyOffice which allows editing these complex document types, but it is a highly complex piece of software and we will need time and effort to integrate it into CryptPad. Even after it is fully integrated, the conversion of xlsx files to OnlyOffice’s internal format will still need to be carried out be specialized software either on the user’s computer, or on a cloud service (not Zero-Knowledge!). However, we think that editing of spreadsheets and other documents in OnlyOffice is achievable without leaking any of the content back to the CryptPad server, so your spreadsheets will remain a secret.</p>
<ul>
<li>Spreadsheets, documents and presentations in CryptPad</li>
<li>Realtime collaborative editing of office documents</li>
<li>No import/export for now, this will come later</li>
<li>No embedding of images from CryptPad until later</li>
</ul>
<p>We expect office file editing will take <strong>30 days, a cost of €7,500</strong></p>
<h1 id="Goal-2-Comments-on-Rich-Text-Pads"><a href="#Goal-2-Comments-on-Rich-Text-Pads" class="headerlink" title="Goal 2 - Comments on Rich Text Pads"></a>Goal 2 - Comments on Rich Text Pads</h1><p>Many people use a workflow which includes the use of comments in a document. This is already standard in Google Docs and we need to be able to support it in CryptPad, in order to add comments we will need to add some HTML into the document without causing any problems for CKEditor (our rich text editor) and without causing it to be treated as part of the pad and synced over the wire.</p>
<ul>
<li>In the rich text pad, you will be able to add a comment by selecting some text, right clicking it and clicking “add comment”</li>
<li>Comments will be shown in the right margin and associated with the text which highlighted them</li>
<li>Comments will be able to be replied to, or “resolved” (they will no longer be shown, but still be visible in history of the document)</li>
<li>If you delete the text with which a comment was associated, the comment will automatically be resolved</li>
</ul>
<p>We expect Comments on Rich Text Pads to take about <strong>10 days of development, a cost of €2,500</strong></p>
<h1 id="Goal-3-Contacts-and-Messaging"><a href="#Goal-3-Contacts-and-Messaging" class="headerlink" title="Goal 3 - Contacts and Messaging"></a>Goal 3 - Contacts and Messaging</h1><p>To be able to easily share documents and get the attention of a person, we would like to implement Contacts and Messaging in CryptPad, currently we have a rudimentry implementation which allows chatting with contacts, but the contact request feature needs to be stabilized with a better process for contact requests, better integration with pad-sharing menu and more clear notifications. We would also like to add a small chat window in each document so that everyone working on that document can chat about it. Finally, we would like to add the ability to at-reference someone when writing a comment on a pad, which will cause a message to be sent to them.</p>
<ul>
<li>The share menu will include a list of contacts with whom you can share the pad</li>
<li>You will be able to email somebody a link which will invite them to become a contact of yours</li>
<li>Messages (pads shared with you, comments referencing you) will be shown in the upper-right when you come to CryptPad</li>
<li>When writing a comment (Goal 2), you will be able to at-reference a contact (with auto-complete) and they will be notified</li>
<li>Replying to (and resolving) a comment will also cause the author of the comment and anyone who replied to be notified</li>
</ul>
<p>We expect Contacts and Messaging to take about <strong>20 days of development, a cost of €5,000</strong></p>
<h1 id="Goal-4-Shared-Drive"><a href="#Goal-4-Shared-Drive" class="headerlink" title="Goal 4 - Shared Drive"></a>Goal 4 - Shared Drive</h1><p>When planning a significant project, often there is the need to have many pads for the different aspects of the project. Currently all of the collaborators on the project must share all of the pad links with each other and they must each organize them in their personal drives. Personal drive organization is a nice feature because it allows each person to organize their work the way that makes the most sense to them, but sometimes it is more advantageous to have a folder in everybody’s drive which contains pads that are shared between all of them.</p>
<p>Shared folders are complicated to implement. Unlike your personal drive which is just one realtime object (essentially it’s a pad), each shared folder must be a separate realtime object. Also, like a user account, a shared folder must be able to own pads, otherwise pads in that folder which are not in anyone’s personal drive risk being deleted by the server as per our expiration policy.</p>
<ul>
<li>You will be able to create a shared drive, just like you create a pad</li>
<li>In your drive, you will be able to explore inside of the shared drive and organize it just like a folder</li>
<li>You will be able to share the link to the Shared Drive with other people, when they click the link, it will import the shared drive into their personal drive</li>
</ul>
<p>We expect Shared Drive to take about <strong>20 days of development, a cost of €5,000</strong></p>
<h1 id="Goal-5-Federated-Messaging"><a href="#Goal-5-Federated-Messaging" class="headerlink" title="Goal 5 - Federated Messaging"></a>Goal 5 - Federated Messaging</h1><p>There are about 150 CryptPad instances in existence, operated by people and organizations who want the privacy which CryptPad offers and also the additional security guarantee, decentralization and customization of their own instance. We want to support this usage while still allowing people on one instance to chat and message people on another instance. We want to support the ability to add contacts (Goal 3) with people registered on a different instance. You will then be able to at-reference them in a comment or share a pad with them using the share menu as you would with a person using the same instance as you.</p>
<ul>
<li>When you are on a pad or shared folder on somebody else’s instance, you will be able to import it to your instance</li>
<li>Clicking a link to become a contact will work, even if you are registered on a different instance</li>
<li>Once you have made a contact, all features in Contacts and Messaging will function across instances</li>
</ul>
<p>We expect Federated Messaging to take about <strong>30 days of development, a cost of €7,500</strong></p>
<h1 id="Goal-6-Better-permissions"><a href="#Goal-6-Better-permissions" class="headerlink" title="Goal 6 - Better permissions"></a>Goal 6 - Better permissions</h1><p>Initially, all pads were “open” pads, meaning they were accessible to anyone and there was no owner. Open pads are deleted automatically when they have not been touched in 3 months, unless a registered user has a reference to them. Once we added the ability to have registered users, we needed to make sure that users would not have the pads in their drive disappear off the server, so we implemented what we call pinning. Pinning is a way of claiming that a pad is important to you and that it should not be deleted. However, this left a problem, still pads had no owner, meaning nobody had the right to delete them. Once a pad was created, there was no way to delete it which was a serious problem for pads contining confidential information.</p>
<p>In order to allow pads to be deleted, we implemented <em>owned pads</em>, and the splash screen registered users now see when they create a new pad. So now you can delete it from the server when you are done with it. However, two problems remain:</p>
<ol>
<li>The owner of a pad is the person who created it and there is no way to add owners or share ownership</li>
<li>There is no way to revoke access once it has been given</li>
</ol>
<p>In order to solve #1, we will add the ability to share ownership with other people. For solving #2 in a Zero-Knowledge compatible way, we will need to introduce the concept of redirects, links which re-direct to the actual ID and key of the pad. Revoking access will be a matter of changing the pad’s ID and then updating all of the redirects which are <em>not</em> to be revoked. This will allow the creation of pads which can only be viewed by registered users who are invited. Even view-only links to a pad will be able to be revoked by the owners of that pad.</p>
<ul>
<li>Pads which are only accessible by people invited, or members of a group</li>
<li>Grant and revoke access</li>
<li>Create new links to a pad, and revoke them</li>
</ul>
<p>We expect better permissions will take about <strong>40 days of development, a cost of €10,000</strong></p>
<h1 id="Goal-7-Color-by-author"><a href="#Goal-7-Color-by-author" class="headerlink" title="Goal 7 - Color-by-author"></a>Goal 7 - Color-by-author</h1><p>After something is typed into a pad, the person who typed cannot be determined, we would like to change this and allow the etherpad-like behavior of shading the text differently based on who typed it. This will require getting the author from each patch in the stream of changes to the pad and making it available to the pad structure. In CryptPad there is a special message type which is called a checkpoint, it replaces the entire pad so that when a new person arrives in the pad, they don’t need to download more history than the previous 2 checkpoints. We will need to take special care to preserve the editor of each piece of the document when we create checkpoints, finally we will need to be able to shade the text based on it’s author, without either messing up CKEditor or causing the shading to be sent over the wire as if it were part of the pad.</p>
<ul>
<li>When an option is selected, text in the rich text app will be shaded with a color based on the author of that text</li>
<li>The user list will show users who have joined and then left again, along with the color of their changes</li>
<li>Right-clicking on the text will show the name of the person who wrote it (including whether they are one of your contacts)</li>
</ul>
<p>We expect Color-by-author to take about <strong>20 days of development, a cost of €5,000</strong></p>
<h1 id="Goal-8-Offline-and-Suggested-Edits"><a href="#Goal-8-Offline-and-Suggested-Edits" class="headerlink" title="Goal 8 - Offline and Suggested Edits"></a>Goal 8 - Offline and Suggested Edits</h1><p>Like color-by-author, Offline and Suggested Edits is a reasonably complicated feature to implement. When working on a complex document, it is nice to be able to propose a change without actually changing the document, or make a change while disconnected from the internet and then have someone (maybe you) merge it later. However, this is complicated because when it comes time to merge that change, the document may have significantly changed, necessitating a smart merge.</p>
<p>Rich text pads in CryptPad are stored in a quazi-html representation so patching and merging is anything but simple. The operational transformation done normally on pads takes advantage of the fact that divergences are small and infrequent so merging usually works ok. This feature will require development of a smart merging algorithm for the rich text app as well as for any other app for which one would like to have suggested edits and offline.</p>
<ul>
<li>Suggestion mode, your change is shown shaded and can be accepted or rejected, it will be attached to a comment so you can explain it</li>
<li>When offline, you are automatically put into suggestion mode instead of read-only mode</li>
</ul>
<p>We expect Offline and Suggested Edits to take <strong>40 days of development, a cost of €10,000</strong></p>
<h1 id="Goal-9-All-the-little-things"><a href="#Goal-9-All-the-little-things" class="headerlink" title="Goal 9 - All the little things"></a>Goal 9 - All the little things</h1><p>Even though it doesn’t get a lot of press, a significant amount of time is spent just fixing bugs, handling pull requests and doing releases. We want to keep CryptPad a community project and so we want to make sure that when someone makes a pull-request to the project, that request can be properly handled. Also, because CryptPad makes such use of modern HTML5 features, new releases of Chrome and Firefox typically introduce new bugs in CryptPad. There is rarely enough time to handle all of the issues which crop up, but we need to allocate time to handle some of them. This roadmap allocates the time of one person for 48 weeks, which means 24 releases, we need at least 1 day per release just to perform the release and write the release notes and fix miscellanious issues which appear.</p>
<ul>
<li>Keep on fixing bugs in CryptPad </li>
<li>Handle pull requests and make releases</li>
</ul>
<p>We expect all the little things to take <strong>30 days of development, a cost of €7,500</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.cryptpad.org/2018/07/13/CryptPad-Roadmap/" data-id="cktsjy9ty0008cya88a0sswgm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/funding/">funding</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/roadmap/">roadmap</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-CryptPad-ZeroKnowledge-Free-Software-needs-funding" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/06/CryptPad-ZeroKnowledge-Free-Software-needs-funding/" class="article-date">
  <time datetime="2018-07-06T09:07:18.000Z" itemprop="datePublished">2018-07-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/06/CryptPad-ZeroKnowledge-Free-Software-needs-funding/">CryptPad #ZeroKnowledge Free Software needs funding</a>
    </h1>
  


        
            <span class="article-author">
                by
                Caleb James DeLisle
            </span>
        

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://blog.ludovic.org/xwiki/bin/view/Blog/Aidez%20le%20projet%20libre%20CryptPad" target="_blank" rel="noopener">Version française ? 🇫🇷</a></p>
<p>On October 31, 2014 the CryptPad project was first published, back then it was nothing more than a simple rich text pad and a horribly ugly front page. Since then the project has blossemed with financing from <a href="https://www.xwiki.com/en/" target="_blank" rel="noopener">XWiki SAS</a> and the <a href="https://open-paas.org/" target="_blank" rel="noopener">OpenPaaS::NG</a> research project.</p>
<p>Now we are turning a corner, the OpenPaaS::NG project will end in April of 2019 and in order to keep improving, CryptPad will need new sources of funding.</p>
<p>Until now, the vast majority of CryptPad code has been developed by XWiki SAS and with the future of research financing in question, we want to be completely clear about our intentions. We don’t want to take financing that is incompatible with the open spirit of CryptPad so while we will look for research projects, subscriptions and donations, we want to maintain the community spirit of CryptPad.</p>
<ol>
<li><strong>We will continue to host</strong> <a href="https://cryptpad.fr/" target="_blank" rel="noopener">https://cryptpad.fr/</a>: We want to thank everyone who has subscribed to paid accounts, with your support (currently 1,5K/year) this server pays for itself and we consider this a valuable public service which should continue.</li>
<li><strong>XWiki SAS will continue to fund the team through the OpenPAAS project till the end of the project</strong>. Following this our intention is to try to keep at least 1 developer active on the project (50,000€ per year) using alternative funding or through new research projects. If we can’t find a research project we’ll evaluate our capacity to keep it alive based on the subscriptions and contributions we have received. </li>
<li><strong>We will begin making the CryptPad finances public</strong>: All of the money that comes in and goes out of the CryptPad project, including the money paid by subscriptions to <a href="https://cryptpad.fr/" target="_blank" rel="noopener">https://cryptpad.fr/</a> will be published so that you can see how the project earns and spend money, and be convinced that it’s worth supporting us. You will be able to follow the project’s finances by going to <a href="https://opencollective.com/cryptpad" target="_blank" rel="noopener">CryptPad on OpenCollective</a></li>
</ol>
<p>Currently, the funding from our subscriptions and donations is not enough to finance even one developer, nevermind the present team of two. We need your help to grow this revenue through April 2019 and show that this can take over funding even if we don’t find a research project before then. All revenue received till April 2019 will be used to fund development after April 2019.</p>
<h2 id="What-we-would-like-to-do"><a href="#What-we-would-like-to-do" class="headerlink" title="What we would like to do"></a>What we would like to do</h2><p>So far, we have not been very transparent about our roadmap, we have a <a href="https://cryptpad.fr/code/#/1/view/R1kZC1mY9khSsrLCyJT+CA/t5Eey4SVS+TpaZWmhrCTvIP50IzX7GR4gnud9UclR6Y/present/" target="_blank" rel="noopener">tech tree</a> which shows in simple terms what features we would like to have and what technologies need to be developed in order to get those features working.</p>
<p>In the medium term, we would like to see CryptPad evolve into a generic platform with installable apps, a cryptographically enforced access control system, and federation with PGP-compatible messaging.</p>
<ul>
<li><strong>Installable Apps</strong>: There are not a lot of differences between the rich text pad, the code pad, the slide deck and the kanban board. They are all layered on top of the same CryptPad base infrastructure, but still it is not possible to create a new one without changing a few things in the CryptPad core. We would like to change this so that a new app can be added without changing anything else.</li>
<li><strong>Cryptographically enforced Access Controls</strong>: Initially CryptPad had a very simple access control system, you share the link and that shares the pad. We added the ability to <em>publish</em> pads via read-only links and to assign a password to a pad, but we still don’t have the ability to share a pad with a group of people, or importantly, revoke access once it has been given. Traditional access controls are simple because the server is trusted to give and revoke access, however with CryptPad the server doesn’t have access to begin with so it must be done cryptographically. In the context of federation, cryptographic access controls are even more important since servers in the network can be run by anybody.</li>
<li><strong>Federation and Messaging</strong>: The weakness in CryptPad security has always been securely sharing the pad link. Today there are about 150 CryptPad instances installed around the world, and we would like to allow people on different instances to share pads and send eachother messages. Furthermore, since we already have client-side encryption, we could easily extend messaging to support PGP for sharing of pad links and messages.</li>
</ul>
<p>Fundamentally, our goal is as it always has been, to promote Zero Knowledge and an alternative to the Google Docs / Office365 hegemony on cloud office technology. However, this is not something we can do alone, we will need your help to move it forward.</p>
<h2 id="How-you-can-help"><a href="#How-you-can-help" class="headerlink" title="How you can help"></a>How you can help</h2><p>You can help CryptPad in a number of ways, if you’re a programmer then you can contribute code, if you’re a philanthropist and believe in these ideas then you can finance the roadmap or finance just particular features. What everyone can do is use CryptPad and spread the word and show people that it is possible to collaboratively edit documents without giving all the data to the server admins.</p>
<ul>
<li><strong>Contribute code</strong>: If you are a programmer and you are using CryptPad, help make it better, talk to us about what you would like to do with CryptPad and we will do our best to find a way that your code can be integrated.</li>
<li><strong>Take a subscription</strong>: Every subscription helps bring a little more money into the project and this will be re-invested to make the CryptPad project better. Every subscription we get makes us believe more in the project we do and the ability to make it financially sustainable. <a href="https://accounts.cryptpad.fr/" target="_blank" rel="noopener">Subscribe</a>.</li>
<li><strong>Sponsor a feature</strong>: This is one of the best ways to make sure CryptPad will improve because you can both help the project and help guide the project roadmap at the same time.</li>
<li><strong>Get support</strong>: If you’ve installed your own CryptPad in a business setting, you can get support for your installation and also help foster development of the project.</li>
<li><strong>Just donate</strong>: If you don’t know what to sponsor, if you don’t need a subscription, or if you want to sponsor more than the value of a subscription, just donate ! Even if it is not a lot of money, this is important to us as it allows to prove that the project matters. <a href="https://opencollective.com/cryptpad" target="_blank" rel="noopener">Donate on opencollective.com</a></li>
<li><strong>Get us in a funded research project</strong>: If you are a research organization or have experience with getting European research funding, particularly in a security oriented project, get us on board to participate in the project. This will allow us to fund the project.</li>
<li><strong>Spread the word</strong>: The more CryptPad is used and the more it’s known, the more we can convince potential financers to fund the project, this is also proves that people are interested in it. <a href="https://twitter.com/intent/tweet?text=Check%20out%20the%20%40CryptPad%20project%2C%20it%27s%20an%20open%20source%20collaborative%20editor%20and%20drive%20and%20it%27s%20end-to-end%20encrypted%20so%20the%20server%20sees%20nothing.%20%23e2ee%20%23ZeroKnowledge" target="_blank" rel="noopener">Tweet about CryptPad</a></li>
</ul>
<p>To see information about our budget and goals and to make a donation, check out <a href="https://opencollective.com/cryptpad" target="_blank" rel="noopener">CryptPad on OpenCollective</a>.</p>
<h2 id="Come-have-a-chat"><a href="#Come-have-a-chat" class="headerlink" title="Come have a chat"></a>Come have a chat</h2><p>We’re on <a href="https://twitter.com/cryptpad" target="_blank" rel="noopener">Twitter</a> and <a href="http://social.weho.st/@cryptpad" target="_blank" rel="noopener">Mastodon</a> and we have a CryptPad <a href="https://riot.im/app/#/room/#cryptpad:matrix.xwiki.com" target="_blank" rel="noopener">chat room on Matrix</a>. Come talk with us and participate to help with the project.</p>
<p>If you are a Web or Research professional, are intereted in our objectives and have experience in research, come talk to us as <a href="https://www.xwiki.com/en/jobs/research-and-development-lead" target="_blank" rel="noopener">we’re interested in hiring a person</a> to help us win and execute research projects and guide CryptPad to make it functionally and economically successful.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.cryptpad.org/2018/07/06/CryptPad-ZeroKnowledge-Free-Software-needs-funding/" data-id="cktsjy9u10009cya83wvs6oxm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/funding/">funding</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zero-knowledge/">zero knowledge</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Faster-loads-with-SharedWorker-ServiceWorker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/22/Faster-loads-with-SharedWorker-ServiceWorker/" class="article-date">
  <time datetime="2018-06-22T15:51:58.000Z" itemprop="datePublished">2018-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/22/Faster-loads-with-SharedWorker-ServiceWorker/">Faster loads with SharedWorker &amp; ServiceWorker</a>
    </h1>
  


        
            <span class="article-author">
                by
                Caleb James DeLisle
            </span>
        

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When CryptPad was first created, the only thing to load was the CryptPad code itself and the pad which you were editing. Recently edited pads were remembered in the browser’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener">localStorage</a> which was not portable between computers but allowed some recent history to be kept.</p>
<p>However, we wanted to allow people to login and manage their pads on all of their devices so we created the CryptDrive. Anyone who has used CryptPad but never logged in is encouraged to <a href="https://cryptpad.fr/register" target="_blank" rel="noopener">register and login</a> (it’s free) and check out their drive. CryptDrive is basically just a realtime pad containing a JSON structure with links to all of your pads as well as their titles and other information. When you update the title of a pad, it changes the pad itself but it also changes your drive so that you can see the title of the pad in your drive. This is of course not perfect because if someone else changes the title of a pad, your drive will not be updated until you look at the pad again, but doing everything with the server completely blind to the content isn’t easy, and this works reasonably well.</p>
<p>However, CryptDrive causes an additional delay when loading CryptPad because whenever you load a document, you are actually loading two realtime instances. Since the drive is loaded over and over for every pad you view, it was obvious to us that we could make it more efficient using communication inside the browser.</p>
<h2 id="First-idea-Messages-between-tabs"><a href="#First-idea-Messages-between-tabs" class="headerlink" title="First idea: Messages between tabs"></a>First idea: Messages between tabs</h2><p>Tabs (or windows) in a browser which are on the same website are able to <a href="http://krasimirtsonev.com/blog/article/Using-Local-Storage-as-a-communication-channel" target="_blank" rel="noopener">communicate using localStorage</a> and so it seemed like a good solution to just have one tab claim the role of managing the drive and then when another tab is opened, it would message the first. However, this seemingly easy solution becomes a nightmare when you consider what happens when that tab is closed. The drive that everyone is relying on goes away and all of the other tabs are without a drive so they need to <a href="https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html" target="_blank" rel="noopener">flip a coin</a> to decide which tab should become the keeper of the drive, then that tab needs to download the drive before it can service events, all the while any of the buttons which affect the drive (for instance deleting the pad) cannot possibly function. This idea was soon scrapped…</p>
<h2 id="Enter-ServiceWorker"><a href="#Enter-ServiceWorker" class="headerlink" title="Enter ServiceWorker"></a>Enter ServiceWorker</h2><p>Recently, the HTML5 working group created a new standard called <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker" target="_blank" rel="noopener">ServiceWorker</a> which for someone making a webapp seems like a dream come true. ServiceWorkers:</p>
<ul>
<li>Are side-processes which are created one-per-website and live in the background.</li>
<li>Can intercept HTTP requests from your main javascript (excellent for caching!).</li>
<li>Is suspended when the last tab is closed, and re-launched when the user returns.</li>
<li>Are stored in suspended state even when the browser is turned off.</li>
<li>Supported by <a href="https://caniuse.com/#search=serviceworker" target="_blank" rel="noopener">every modern browser</a>.</li>
</ul>
<p>When the website loads a worker, if the worker is already running it will not load and will instead defer to the existing worker. Communicating between workers and tabs which are on the website is possible via a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage" target="_blank" rel="noopener">postMessage()</a> API and then the ServiceWorker can postMessage() which will reach all tabs that are navigated to the website.</p>
<p>One limitation of this design is versioning. Because the ServiceWorker would stay alive potentially forever, we needed to identify a way to upgrade it if a new version of CryptPad is released. This is quite important for CryptPad as version mismatches can lead to catastrophic conflicts between different browsers working on the same document.</p>
<p>Though updating is non-trivial, we were able to solve it by sending version messages between different components of CryptPad and informing them whether they need to update (or even if they can <em>optionally</em> update). Since this seemed like a solvable problem, we tried creating an experimental implementatiton of ServiceWorkers in CryptPad, and then the fun started…</p>
<h3 id="ServiceWorkers-in-Firefox"><a href="#ServiceWorkers-in-Firefox" class="headerlink" title="ServiceWorkers in Firefox"></a>ServiceWorkers in Firefox</h3><p>Since Firefox 48, Firefox has begun following Chrome’s model and running <a href="https://developer.mozilla.org/en-US/Firefox/Multiprocess_Firefox" target="_blank" rel="noopener">different processes</a> for rendering the different tabs in the browser. However, this isolation has a side-effect that when you attempt to launch a ServiceWorker, it <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1438945" target="_blank" rel="noopener">may launch even though one already exists for the same website</a>, because the other one exists in a different tab which happens to be operating in a different process. However, the postMessage() requests from tabs go out to all of the ServiceWorkers so this bug can be worked around.</p>
<p>Unfortunately we encountered some more issues with Firefox which we found not worth debugging. Our CryptDrive is a Javascript object which is represented in the encrypted realtime document as JSON and there is an ES6 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy</a> object in order to allow every change to the drive to be propagated to the underlying realtime object. In Firefox the proxy did not work when used in a ServiceWorker and at times our ServiceWorker simply stopped running.</p>
<h3 id="Reporting-bugs-in-browsers"><a href="#Reporting-bugs-in-browsers" class="headerlink" title="Reporting bugs in browsers"></a>Reporting bugs in browsers</h3><p>One might think these are great opportunities to report issues with Firefox, and when we find an <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1434278" target="_blank" rel="noopener">issue which we think will affect lots of people</a> especially if it is a regression, we don’t hesitate to report it, but usually it is not clear how to reproduce the issue, whether there might be some error in our usage of the API which is being smoothed over by Chrome, or whether the component being reported on is a priority, in that case rather rain low quality bug reports down upon the poor browser developers, we spend our limited time trying to make CryptPad better. In the case of ServiceWorker in Firefox, our conclusion is that in effect the technology remains experimental and shouldn’t be relied upon.</p>
<h2 id="SharedWorker-to-the-rescue"><a href="#SharedWorker-to-the-rescue" class="headerlink" title="SharedWorker to the rescue"></a>SharedWorker to the rescue</h2><p>Fortunately there is another technology called <a href="https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker" target="_blank" rel="noopener">SharedWorker</a> which is essentially identical to a plain vanilla WebWorker but can communicate with all tabs which are navigated to the site. Unfortunately this technology is only supported in <a href="https://caniuse.com/#feat=sharedworkers" target="_blank" rel="noopener">Chrome and Firefox</a>, but the support for this technology, we found, really works!</p>
<p>However, Firefox still has the <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1438945" target="_blank" rel="noopener">issue</a> with of multiple SharedWorkers being created for multiple tabs, but since this issue is fixable we were able to go ahead with it anyway. For browsers which have no SharedWorker, they would fallback to plain old WebWorker. Though this seems like it would be a problem, it is in fact quite fine because actions done in the drive by another WebWorker are the same as actions done in the drive by another device, they need to be encrypted and sent to the server in order to persist anyway.</p>
<h2 id="Faster-CryptPad"><a href="#Faster-CryptPad" class="headerlink" title="Faster CryptPad"></a>Faster CryptPad</h2><p>Coming in the release on Tuesday June 26, 2018, we will have a new SharedWorker based CryptPad instance, that means when you use Chrome or Firefox, the first time you open CryptPad, it will load your drive, but then every tab you open after that will communicate with the SharedWorker managing the drive and therefore pads will load nearly twice as fast.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.cryptpad.org/2018/06/22/Faster-loads-with-SharedWorker-ServiceWorker/" data-id="cktsjy9uf000pcya8cv25ixrs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shared-worker/">shared worker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web-worker/">web worker</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/6/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/">Next</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/FOSDEM/" style="font-size: 10px;">FOSDEM</a> <a href="/tags/administration/" style="font-size: 11.43px;">administration</a> <a href="/tags/analytics/" style="font-size: 10px;">analytics</a> <a href="/tags/appstore/" style="font-size: 10px;">appstore</a> <a href="/tags/award/" style="font-size: 11.43px;">award</a> <a href="/tags/calendar/" style="font-size: 10px;">calendar</a> <a href="/tags/chain-of-trust/" style="font-size: 10px;">chain of trust</a> <a href="/tags/cloud/" style="font-size: 12.86px;">cloud</a> <a href="/tags/communities/" style="font-size: 10px;">communities</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/data/" style="font-size: 11.43px;">data</a> <a href="/tags/document/" style="font-size: 10px;">document</a> <a href="/tags/documentation/" style="font-size: 10px;">documentation</a> <a href="/tags/donate/" style="font-size: 15.71px;">donate</a> <a href="/tags/embed/" style="font-size: 10px;">embed</a> <a href="/tags/ethics/" style="font-size: 10px;">ethics</a> <a href="/tags/extensibility/" style="font-size: 10px;">extensibility</a> <a href="/tags/file/" style="font-size: 10px;">file</a> <a href="/tags/forms/" style="font-size: 14.29px;">forms</a> <a href="/tags/funding/" style="font-size: 20px;">funding</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/infrastructure/" style="font-size: 10px;">infrastructure</a> <a href="/tags/interoperability/" style="font-size: 12.86px;">interoperability</a> <a href="/tags/login/" style="font-size: 10px;">login</a> <a href="/tags/media-tag/" style="font-size: 10px;">media-tag</a> <a href="/tags/ngi/" style="font-size: 15.71px;">ngi</a> <a href="/tags/open-collective/" style="font-size: 14.29px;">open collective</a> <a href="/tags/open-source/" style="font-size: 14.29px;">open-source</a> <a href="/tags/pdf/" style="font-size: 10px;">pdf</a> <a href="/tags/performance/" style="font-size: 11.43px;">performance</a> <a href="/tags/presentation/" style="font-size: 12.86px;">presentation</a> <a href="/tags/press/" style="font-size: 10px;">press</a> <a href="/tags/privacy/" style="font-size: 12.86px;">privacy</a> <a href="/tags/project-site/" style="font-size: 10px;">project site</a> <a href="/tags/quality/" style="font-size: 11.43px;">quality</a> <a href="/tags/release/" style="font-size: 11.43px;">release</a> <a href="/tags/research/" style="font-size: 14.29px;">research</a> <a href="/tags/retrospective/" style="font-size: 12.86px;">retrospective</a> <a href="/tags/roadmap/" style="font-size: 17.14px;">roadmap</a> <a href="/tags/security/" style="font-size: 15.71px;">security</a> <a href="/tags/shared-worker/" style="font-size: 10px;">shared worker</a> <a href="/tags/signing/" style="font-size: 10px;">signing</a> <a href="/tags/social-media/" style="font-size: 10px;">social media</a> <a href="/tags/spreadsheet/" style="font-size: 10px;">spreadsheet</a> <a href="/tags/status-update/" style="font-size: 18.57px;">status update</a> <a href="/tags/storage/" style="font-size: 12.86px;">storage</a> <a href="/tags/subresource-integrity/" style="font-size: 10px;">subresource integrity</a> <a href="/tags/survey/" style="font-size: 10px;">survey</a> <a href="/tags/talk/" style="font-size: 12.86px;">talk</a> <a href="/tags/upload/" style="font-size: 10px;">upload</a> <a href="/tags/web-worker/" style="font-size: 10px;">web worker</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/zero-knowledge/" style="font-size: 12.86px;">zero knowledge</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/27/status-2022-04/">April 2022 status: The public instance list goes live</a>
          </li>
        
          <li>
            <a href="/2022/03/29/March-2022-status-catching-up-on-recent-news/">March 2022 status: catching up on recent news</a>
          </li>
        
          <li>
            <a href="/2021/12/30/Preparing-for-2022/">Preparing for 2022</a>
          </li>
        
          <li>
            <a href="/2021/11/24/status-2021-11/">November 2021 status: Talks and testimonials</a>
          </li>
        
          <li>
            <a href="/2021/10/27/status-2021-10/">October 2021 status: A pitch and a farewell </a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>

        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 XWiki Labs<br>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="https://cryptpad.fr" class="mobile-nav-link">Use CryptPad.fr</a>
  
</nav>
    

<script src="/js/jquery.min.js"></script>



<script src="/js/script.js"></script>

  </div>
</body>
</html>